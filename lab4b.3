#include"stdafx.h"
#include<Windows.h>
#include<iostream>
#include<conio.h>
using namespace std;

HANDLE hEvent = OpenEvent(
	EVENT_ALL_ACCESS,
	TRUE,
	L"MyEvent1"
);

void Update() {
	unsigned char input = _getch();
	input = tolower(input);
	input = tolower(input);
	switch (input) {
	case 'f': {
		SetEvent(hEvent);
		break;
	}
	case 'x': {
		ResetEvent(hEvent);
		break;
	}
	case 't': {
		exit(1);
	}
	}
}

int main()
{
	if (hEvent == 0) {
		cout << "Error." << endl;
		_getch();
		return 0;
	}
	cout << "Press f to start threads in 1st application..." << endl;
	cout << "Press x to stop threads in 1st application..." << endl;
	cout << "Press t to close 2nd application..." << endl;
	do {
		Update();
	} while (1);
	
}

